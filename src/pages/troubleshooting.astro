---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/layout/Section.astro';

import {
  IconChat,
  IconChevronRight,
  IconCodeBracket,
  IconCog,
  IconDesktop,
  IconDiscord,
  IconGithub,
  IconLockClosed,
  IconSearch,
  IconWarning,
} from '../components/icons';
---

<BaseLayout
  title="Troubleshooting - OpenClaw Issues & Solutions"
  description="Find solutions to common OpenClaw issues. Search our troubleshooting database for installation errors, channel integration problems, and configuration issues."
  keywords="OpenClaw troubleshooting, OpenClaw errors, OpenClaw issues, OpenClaw problems, OpenClaw help, OpenClaw support"
>
  <div
    class="bg-background min-h-screen overflow-x-hidden relative selection:bg-pink-500/30 selection:text-pink-950 dark:selection:text-pink-200"
  >
    <!-- Hero Section -->
    <Section containerClass="text-center pt-24 pb-12">
      <h1
        class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent"
      >
        Troubleshooting Hub
      </h1>
      <p class="text-xl text-default-800 dark:text-default-600 max-w-3xl mx-auto">
        Find solutions to common OpenClaw issues and get back up and running quickly
      </p>
    </Section>

    <!-- Search Bar Section -->
    <Section>
      <div class="max-w-3xl mx-auto">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <IconSearch className="w-5 h-5 text-default-500" aria-hidden="true" />
          </div>
          <input
            type="search"
            placeholder="Search for errors, issues, or keywords..."
            class="w-full pl-12 pr-4 py-4 rounded-2xl border-2 border-divider bg-content1 text-foreground placeholder:text-default-500 focus:border-primary focus:outline-none transition-colors text-lg"
          />
        </div>
        <p class="text-sm text-default-600 mt-3 text-center">
          Try searching for "Node.js version", "Telegram webhook", or "permission denied"
        </p>
      </div>
    </Section>

    <!-- Issue Categories -->
    <Section containerClass="mt-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Browse by Category</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- Installation Issues -->
        <a
          href="/getting-started"
          class="group relative overflow-hidden rounded-2xl border border-divider bg-content1 p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1"
        >
          <div class="mb-4">
            <div
              class="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center"
            >
              <IconWarning className="w-6 h-6 text-white" aria-hidden="true" />
            </div>
          </div>
          <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">
            Installation Issues
          </h3>
          <p class="text-default-700 dark:text-default-500 text-sm mb-4">
            Node.js errors, dependency conflicts, permission problems
          </p>
          <div class="flex items-center text-primary text-sm font-medium">
            <span>View issues</span>
            <IconChevronRight
              className="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
              aria-hidden="true"
            />
          </div>
        </a>

        <!-- Channel Integration -->
        <a
          href="/guides"
          class="group relative overflow-hidden rounded-2xl border border-divider bg-content1 p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1"
        >
          <div class="mb-4">
            <div
              class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center"
            >
              <IconChat className="w-6 h-6 text-white" aria-hidden="true" />
            </div>
          </div>
          <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">
            Channel Integration
          </h3>
          <p class="text-default-700 dark:text-default-500 text-sm mb-4">
            Telegram, WhatsApp, Slack, Discord connection issues
          </p>
          <div class="flex items-center text-primary text-sm font-medium">
            <span>View issues</span>
            <IconChevronRight
              className="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
              aria-hidden="true"
            />
          </div>
        </a>

        <!-- Configuration Errors -->
        <a
          href="/tools/config-generator"
          class="group relative overflow-hidden rounded-2xl border border-divider bg-content1 p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1"
        >
          <div class="mb-4">
            <div
              class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center"
            >
              <IconCog className="w-6 h-6 text-white" aria-hidden="true" />
            </div>
          </div>
          <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">
            Configuration Errors
          </h3>
          <p class="text-default-700 dark:text-default-500 text-sm mb-4">
            JSON syntax, API keys, gateway connection problems
          </p>
          <div class="flex items-center text-primary text-sm font-medium">
            <span>View issues</span>
            <IconChevronRight
              className="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
              aria-hidden="true"
            />
          </div>
        </a>

        <!-- Platform-Specific -->
        <a
          href="/getting-started"
          class="group relative overflow-hidden rounded-2xl border border-divider bg-content1 p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1"
        >
          <div class="mb-4">
            <div
              class="w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center"
            >
              <IconDesktop className="w-6 h-6 text-white" aria-hidden="true" />
            </div>
          </div>
          <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">
            Platform-Specific
          </h3>
          <p class="text-default-700 dark:text-default-500 text-sm mb-4">
            macOS, Linux, Windows, ARM64 compatibility issues
          </p>
          <div class="flex items-center text-primary text-sm font-medium">
            <span>View issues</span>
            <IconChevronRight
              className="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
              aria-hidden="true"
            />
          </div>
        </a>
      </div>
    </Section>

    <!-- Common Issues -->
    <Section containerClass="mt-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Most Common Issues</h2>
      <div class="max-w-4xl mx-auto space-y-4">
        <!-- Issue 1 -->
        <div
          class="rounded-xl border border-divider bg-content1 p-6 hover:border-primary/30 transition-colors"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 rounded-lg bg-red-500/10 flex items-center justify-center">
                <IconWarning className="w-5 h-5 text-red-500" aria-hidden="true" />
              </div>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold mb-2">Error: Node.js version mismatch</h3>
              <p class="text-default-700 dark:text-default-500 mb-3">
                OpenClaw requires Node.js 22+ (Node 22 LTS recommended). Check your version with <code
                  class="px-2 py-1 rounded bg-content2 text-sm">node --version</code
                >
              </p>
              <a href="/getting-started" class="text-primary hover:underline text-sm font-medium">
                View solution →
              </a>
            </div>
          </div>
        </div>

        <!-- Issue 2 -->
        <div
          class="rounded-xl border border-divider bg-content1 p-6 hover:border-primary/30 transition-colors"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center">
                <IconChat className="w-5 h-5 text-blue-500" aria-hidden="true" />
              </div>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold mb-2">Telegram webhook failed to connect</h3>
              <p class="text-default-700 dark:text-default-500 mb-3">
                Common causes include incorrect bot token, network issues, or webhook URL
                configuration problems.
              </p>
              <a
                href="/getting-started/quick-start"
                class="text-primary hover:underline text-sm font-medium"
              >
                View solution →
              </a>
            </div>
          </div>
        </div>

        <!-- Issue 3 -->
        <div
          class="rounded-xl border border-divider bg-content1 p-6 hover:border-primary/30 transition-colors"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center">
                <IconCodeBracket className="w-5 h-5 text-purple-500" aria-hidden="true" />
              </div>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold mb-2">Invalid JSON syntax in configuration</h3>
              <p class="text-default-700 dark:text-default-500 mb-3">
                JSON parsing errors are often caused by missing commas, trailing commas, or unquoted
                strings.
              </p>
              <a
                href="/guides/whatsapp-setup"
                class="text-primary hover:underline text-sm font-medium"
              >
                View solution →
              </a>
            </div>
          </div>
        </div>

        <!-- Issue 4 -->
        <div
          class="rounded-xl border border-divider bg-content1 p-6 hover:border-primary/30 transition-colors"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 rounded-lg bg-red-500/10 flex items-center justify-center">
                <IconLockClosed className="w-5 h-5 text-red-500" aria-hidden="true" />
              </div>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold mb-2">
                Permission denied error during installation
              </h3>
              <p class="text-default-700 dark:text-default-500 mb-3">
                This usually occurs when trying to install globally without proper permissions. Use
                sudo or configure npm prefix.
              </p>
              <a
                href="/tools/config-generator"
                class="text-primary hover:underline text-sm font-medium"
              >
                View solution →
              </a>
            </div>
          </div>
        </div>

        <!-- Issue 5 -->
        <div
          class="rounded-xl border border-divider bg-content1 p-6 hover:border-primary/30 transition-colors"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center">
                <IconDesktop className="w-5 h-5 text-green-500" aria-hidden="true" />
              </div>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold mb-2">macOS Sequoia compatibility issues</h3>
              <p class="text-default-700 dark:text-default-500 mb-3">
                Some users on macOS Sequoia experience issues with certain Node.js versions or
                system permissions.
              </p>
              <a href="/getting-started" class="text-primary hover:underline text-sm font-medium">
                View solution →
              </a>
            </div>
          </div>
        </div>
      </div>
    </Section>

    <!-- Community Support Section -->
    <Section containerClass="mt-16 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">Still Need Help?</h2>
      <p class="text-default-800 dark:text-default-600 max-w-2xl mx-auto text-lg mb-8">
        Can't find a solution? Our community is here to help you troubleshoot your issue
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a
          href="https://forum.coclaw.com"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-semibold"
        >
          <IconChat className="w-5 h-5" aria-hidden="true" />
          Community Forum
        </a>
        <a
          href="https://github.com/openclaw/openclaw/issues"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-content1 border border-divider hover:bg-content2 transition-colors font-semibold"
        >
          <IconGithub className="w-5 h-5" aria-hidden="true" />
          GitHub Issues
        </a>
        <a
          href="https://discord.gg/clawd"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-content1 border border-divider hover:bg-content2 transition-colors font-semibold"
        >
          <IconDiscord className="w-5 h-5" aria-hidden="true" />
          Discord
        </a>
      </div>
    </Section>
  </div>
</BaseLayout>
